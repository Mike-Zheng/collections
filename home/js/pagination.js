define("pagination",["paginationCSS"],function(require,exports,module){var _;require("paginationCSS"),(_=jQuery).PaginationCalculator=function(e,t){this.maxentries=e,this.opts=t},_.extend(_.PaginationCalculator.prototype,{numPages:function(){return Math.ceil(this.maxentries/this.opts.items_per_page)},getInterval:function(e){var t=Math.floor(this.opts.num_display_entries/2),n=this.numPages(),a=n-this.opts.num_display_entries;return{start:t<e?Math.max(Math.min(e-t,a),0):0,end:t<e?Math.min(e+t+this.opts.num_display_entries%2,n):Math.min(this.opts.num_display_entries,n)}}}),_.PaginationRenderers={},_.PaginationRenderers.defaultRenderer=function(e,t){this.maxentries=e,this.opts=t,this.pc=new _.PaginationCalculator(e,t)},_.extend(_.PaginationRenderers.defaultRenderer.prototype,{createLink:function(e,t,n){var a,s=this.pc.numPages();return e=e<0?0:e<s?e:s-1,n=_.extend({text:e+1,classes:""},n||{}),a=e==t?_("<span class='current'>"+n.text+"</span>"):_("<a>"+n.text+"</a>").attr("href",this.opts.link_to.replace(/__id__/,e)),n.classes&&a.addClass(n.classes),a.data("page_id",e),a},appendRange:function(e,t,n,a,s){for(var i=n;i<a;i++)this.createLink(i,t,s).appendTo(e)},getLinks:function(e,t){var n,a,s=this.pc.getInterval(e),i=this.pc.numPages(),r=_("<div class='pagination_plugin'></div>");return this.opts.prev_text&&(0<e||this.opts.prev_show_always)&&r.append(this.createLink(e-1,e,{text:this.opts.prev_text,classes:"prev"})),0<s.start&&0<this.opts.num_edge_entries&&(a=Math.min(this.opts.num_edge_entries,s.start),this.appendRange(r,e,0,a,{classes:"sp"}),this.opts.num_edge_entries<s.start&&this.opts.ellipse_text&&jQuery("<span>"+this.opts.ellipse_text+"</span>").appendTo(r)),this.appendRange(r,e,s.start,s.end),s.end<i&&0<this.opts.num_edge_entries&&(i-this.opts.num_edge_entries>s.end&&this.opts.ellipse_text&&jQuery("<span>"+this.opts.ellipse_text+"</span>").appendTo(r),n=Math.max(i-this.opts.num_edge_entries,s.end),this.appendRange(r,e,n,i,{classes:"ep"})),this.opts.next_text&&(e<i-1||this.opts.next_show_always)&&r.append(this.createLink(e+1,e,{text:this.opts.next_text,classes:"next"})),_("a",r).click(t),r}}),_.fn.pagination=function(e,t){t=jQuery.extend({items_per_page:10,num_display_entries:11,current_page:0,num_edge_entries:0,link_to:"javascript:;",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,renderer:"defaultRenderer",load_first_page:!1,callback:function(){return!1}},t||{});var n,a,s,i=this;function r(e){var t=p(_(e.target).data("page_id"));return t||e.stopPropagation(),t}function p(e){return i.data("current_page",e),a=n.getLinks(e,r),i.empty(),a.appendTo(i),t.callback(e,i)}if(s=t.current_page,i.data("current_page",s),e=!e||e<0?1:e,t.items_per_page=!t.items_per_page||t.items_per_page<0?1:t.items_per_page,!_.PaginationRenderers[t.renderer])throw new ReferenceError("Pagination renderer '"+t.renderer+"' was not found in jQuery.PaginationRenderers object.");n=new _.PaginationRenderers[t.renderer](e,t);var o=new _.PaginationCalculator(e,t).numPages();i.bind("setPage",{numPages:o},function(e,t){if(0<=t&&t<e.data.numPages)return p(t),!1}),i.bind("prevPage",function(e){var t=_(this).data("current_page");return 0<t&&p(t-1),!1}),i.bind("nextPage",{numPages:o},function(e){var t=_(this).data("current_page");return t<e.data.numPages-1&&p(t+1),!1}),a=n.getLinks(s,r),i.empty(),a.appendTo(i),t.load_first_page&&t.callback(s,i)}});