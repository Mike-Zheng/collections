define("popbox",["popboxCSS"],function(require,exports,module){var d;require("popboxCSS"),jQuery,jQuery.popbox=function(e){var u,p={id:"",title:"tip-title",style:"popboxDefault",size:{width:"360px",height:"auto"},type:"html",content:"",shade:!1,drag:!0,dragobj:".popboxTitle",isScrollTop:!0,timeout:0,left:0,top:0,esc:!0,shadeclose:!0,callback:null,closeback:null,closeHtml:'<i class="glyphicon glyphicon-remove"></i>'};e&&jQuery.extend(p,e),d=p.closeback,jQuery("#"+p.id).length<=0?(jQuery("body").append('<div id="'+p.id+'" rel="popbox"></div>'),(u=jQuery("#"+p.id)).addClass(p.style),u.css({left:0,top:0})):((u=jQuery("#"+p.id)).addClass(p.style),u.css({left:0,top:0}),u.fadeIn("fast"));var o="";null!=p.title&&(o='<div class="popboxTitle">'+p.title+"</div>");var t="";1==p.esc&&(t="(esc)");var i='<div class="popboxContent">'+o+'<a class="popboxClose" title="close'+t+'">'+p.closeHtml+'</a><div class="popboxMsg"></div></div>';u.html(i),jQuery.popbox.init=function(e){jQuery("div[rel='popbox']:visible").css("zIndex","99992"),u.css("zIndex","99998"),u.css({width:p.size.width,height:p.size.height}).find(".popboxContent").css({width:p.size.width,height:p.size.height});var o,t=jQuery("div[rel='popbox']:visible").length,i=(jQuery(window).width()-u.outerWidth())/2+jQuery(document).scrollLeft()+15*(t-1)+p.left,n=(jQuery(window).height()-u.outerHeight())/2+jQuery(document).scrollTop()-15*(t-1)+p.top;u.css({left:i+"px"}),jQuery(window).height()<=u.outerHeight()?u.css({top:"0px"}):u.css({top:n+"px"}),e&&1==p.shade&&jQuery("#j_shade_"+p.id).length<=0&&(jQuery("body").append('<div id="j_shade_'+p.id+'" class="popboxShade"></div>'),shade_w=document.all?(o="CSS1Compat"==document.compatMode?document.documentElement.scrollWidth:document.body.scrollWidth,Math.max(o,jQuery(window).width())):jQuery(document).width(),jQuery("#j_shade_"+p.id).css({width:shade_w,height:jQuery(document).height()})),jQuery(window).resize(function(){var e;1==p.shade&&(shade_w=document.all?(e="CSS1Compat"==document.compatMode?document.documentElement.scrollWidth:document.body.scrollWidth,Math.max(e,jQuery(window).width())):jQuery(document).width(),jQuery("#j_shade_"+p.id).css({width:shade_w,height:jQuery(document).height()}))}),u.find(".popboxClose").click(function(e){jQuery.popbox.close(p.id)}),1==p.esc&&jQuery(document).keydown(function(e){27==e.keyCode&&jQuery.popbox.close(p.id)})};var n,r=u.find(".popboxContent"),c=u.find(".popboxMsg");jQuery.popbox.load=function(){switch(u.find(".popboxloading").length<=0?r.append('<div class="popboxloading" style="top:'+parseInt(p.size.height)/2+"px;left:"+(parseInt(p.size.width)/2-16)+'px"><i class="icon-spinner icon-spin"></i></div>'):(u.find(".popboxloading").css({top:parseInt(p.size.height)/2+"px",left:parseInt(p.size.width)/2-16+"px"}),u.find(".popboxloading").show()),p.type){case"ajax":jQuery.ajax({url:p.content,cache:!1,error:function(){c.html("<p>Data load timeout, please refresh the page again!</p>")},success:function(e){u.find(".popboxloading").hide(),"function"==typeof p.callback?p.callback(e):c.html(e)}});break;case"iframe":var e;e=-1==p.content.url.indexOf("?")?"?rand_="+Math.round(1e4*Math.random()):"&rand_="+Math.round(1e4*Math.random()),$iframe=jQuery('<iframe id="'+p.id+'_ifr" name="'+p.id+'_ifr" style="width:'+p.content.width+";height:"+p.content.height+';" scrolling="'+p.content.scrolling+'" frameborder="0"></iframe>'),$iframe.appendTo(c.empty()),$iframe.attr("src",p.content.url+e),$iframe.load(function(){u.find(".popboxloading").hide(),"function"==typeof p.callback&&p.callback(html)});break;case"image":"yes"==p.content.scrolling?p.content.scrolling="scroll":"no"==p.content.scrolling?p.content.scrolling="hidden":p.content.scrolling="auto";var o=new Image;o.onload=function(){jQuery('<div style="overflow:'+p.content.scrolling+";text-align:center;margin:auto;width:"+p.content.width+";height:"+p.content.height+';"><img src="'+p.content.url+'" /></div>').appendTo(c.empty()),"function"==typeof p.callback&&p.callback(html)},o.src=p.content.url,u.find(".popboxloading").hide();break;default:c.html(p.content),"function"==typeof p.callback&&p.callback(html),u.find(".popboxloading").hide()}},jQuery.popbox.drag=function(){var e,c,o,d,s,a,l;1==p.drag&&(e=u.find(p.dragobj),c=!1,o=u.position(),s=d=0,a=o.left,l=o.top,e.mousedown(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,c=!0,d=e.clientX,s=e.clientY,jQuery("div[rel='popbox']:visible").css("zIndex","99992"),u.css("zIndex","99998")}).css("cursor","move"),jQuery(document).bind("mousemove.popbox",function(e){var o,t,i,n,p,r;c&&(e.preventDefault?e.preventDefault():e.returnValue=!1,o=e.clientX,t=e.clientY,i=o-d,n=t-s,p=parseInt(a)+i,0<(r=parseInt(l)+n)&&r<jQuery(document).height()-u.outerHeight()&&0<p&&p<jQuery(document).width()-u.outerWidth()&&u.css({left:p,top:r,opacity:.7}))}),jQuery(document).bind("mouseup.popbox",function(){c=!1,a=u.css("left"),l=u.css("top"),u.css("opacity",1)}),u.click(function(){"99998"!=u.css("zIndex")&&(jQuery("div[rel='popbox']:visible").css("zIndex","99992"),u.css("zIndex","99998"))}))},jQuery.popbox.init(!0),jQuery.popbox.load(),jQuery.popbox.drag(),1==p.shade&&1==p.shadeclose&&jQuery("#j_shade_"+p.id).dblclick(function(){jQuery.popbox.close(p.id)}),0!=p.timeout&&($switchTimer=setTimeout(function(){jQuery.popbox.close(p.id)},1e3*p.timeout)),p.isScrollTop&&(n=function(){jQuery("#"+p.id).is(":visible")&&jQuery.popbox.init(!1)},jQuery(window).scroll(n).resize(n))},jQuery.popbox.iclose=function(e,o){jQuery("#j_shade_"+e).remove(),"fast"==o?jQuery("#"+e).hide():jQuery("#"+e).fadeOut("fast")},jQuery.popbox.ititle=function(e,o){jQuery("#"+e).find(".popboxTitle").html(o)},jQuery.popbox.iautoheight=function(e,o){var t=jQuery("#"+e).find(".popboxTitle").outerHeight();jQuery("#"+e).css("height",parseInt(t)+parseInt(o)),jQuery("#"+e).find("iframe[name='ie6_shade']").css("height",parseInt(t)+parseInt(o)),jQuery("#"+e).find(".popboxContent").css("height",parseInt(t)+parseInt(o)),jQuery("#"+e).find("#"+e+"_ifr").css("height",parseInt(o))},jQuery.popbox.close=function(e,o){jQuery.popbox.iclose(e,o);try{window.parent.jQuery.popbox.iclose(e,o),window.parent.parent.jQuery.popbox.iclose(e,o)}catch(e){}"function"==typeof d&&d()},jQuery.popbox.title=function(e,o){jQuery.popbox.ititle(e,o);try{window.parent.jQuery.popbox.ititle(e,o),window.parent.parent.jQuery.popbox.ititle(e,o)}catch(e){}},jQuery.popbox.autoheight=function(e,o){jQuery.popbox.iautoheight(e,o);try{window.parent.jQuery.popbox.iautoheight(e,o),window.parent.parent.jQuery.popbox.iautoheight(e,o)}catch(e){}}});